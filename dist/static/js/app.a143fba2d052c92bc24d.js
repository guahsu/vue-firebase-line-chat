webpackJsonp([0],{"/bIL":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"name"},[a("h3",[e._v("Name："+e._s(e.userName))]),e._v(" "),a("div",{staticClass:"reset",on:{click:function(t){e.setName()}}},[e._v("Reset Name")])]),e._v(" "),a("div",{staticClass:"chatRoom"},[e._m(0),e._v(" "),a("div",{staticClass:"roomBody",attrs:{id:"js-roomBody"}},[e._l(e.messages,function(t){return[t.userName!=e.userName?[a("div",{staticClass:"messageBox"},[a("img",{staticClass:"messageBox__user",attrs:{src:"https://lorempixel.com/40/40/",draggable:"false"}}),e._v(" "),a("div",{staticClass:"messageBox__content"},[a("div",{staticClass:"messageBox__name"},[e._v(e._s(t.userName))]),e._v(" "),"text"==t.type?a("div",{staticClass:"messageBox__message"},[e._v(e._s(t.message))]):e._e(),e._v(" "),"image"==t.type?a("div",{staticClass:"messageBox__image"},[a("img",{attrs:{src:t.message}})]):e._e()]),e._v(" "),a("div",{staticClass:"messageBox__time"},[e._v(e._s(t.timeStamp))])])]:e._e(),e._v(" "),t.userName==e.userName?[a("div",{staticClass:"messageBox messageBox--self"},[a("div",{staticClass:"messageBox__time"},[e._v(e._s(t.timeStamp))]),e._v(" "),a("div",{staticClass:"messageBox__content"},["text"==t.type?a("div",{staticClass:"messageBox__message"},[e._v(e._s(t.message))]):e._e(),e._v(" "),"image"==t.type?a("div",{staticClass:"messageBox__image"},[a("img",{attrs:{src:t.message}})]):e._e()])])]:e._e()]}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.upload,expression:"upload"}],staticClass:"messageBox messageBox--self"},[a("div",{staticClass:"messageBox__progress"},[a("div",{staticClass:"messageBox__progress--state",attrs:{id:"js-progressBar"}}),e._v(" "),a("div",{staticClass:"messageBox__progress--number"},[e._v(e._s(e.progress))])])])],2),e._v(" "),a("div",{staticClass:"roomBottom",class:{disable:!e.userName}},[a("div",{staticClass:"roomBottom__tools"},[a("div",{staticClass:"roomBottom__tools_upload"},[a("input",{attrs:{type:"file",accept:"image/*"},on:{change:function(t){e.sendImage(t)}}}),e._v(" "),a("img",{attrs:{src:s("KSPA")}})])]),e._v(" "),a("div",{staticClass:"roomBottom__input"},[a("textarea",{staticClass:"roomBottom__input__textarea",class:{disable:!e.userName},attrs:{id:"js-message"},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13))return null;e.sendMessage(t)}}})])])]),e._v(" "),a("div",{staticClass:"modal",attrs:{id:"js-modal"}},[a("div",{staticClass:"modal__container"},[e._m(1),e._v(" "),a("div",{staticClass:"modal__body"},[a("input",{staticClass:"userName",attrs:{type:"text",id:"js-userName",maxlength:"6"},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13))return null;e.saveName()}}}),e._v(" "),a("div",{staticClass:"button",on:{click:function(t){e.saveName()}}},[e._v("設定")])]),e._v(" "),a("footer",{staticClass:"modal__footer"})])])])},o=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"roomHead"},[s("div",{staticClass:"roomHead__topButtons"},[s("div",{staticClass:"roomHead__button close"}),e._v(" "),s("div",{staticClass:"roomHead__button minimize"}),e._v(" "),s("div",{staticClass:"roomHead__button zoom"})]),e._v(" "),s("img",{staticClass:"roomHead__img",attrs:{src:"https://lorempixel.com/50/50/",draggable:"false"}}),e._v(" "),s("div",{staticClass:"roomHead__title"},[e._v("Test Room")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("header",{staticClass:"modal__header"},[s("h2",{staticClass:"view-title"},[e._v("輸入名稱")])])}],i={render:a,staticRenderFns:o};t.a=i},Cl4r:function(e,t){},Ds4J:function(e,t,s){"use strict";var a=firebase.database().ref("/messages/");a.orderByChild("type").equalTo("image").on("child_added",function(e){console.log(e.key)});var o=firebase.storage().ref("/images/");t.a={name:"ChatRoom",data:function(){return{userName:"",messages:[],upload:!1,progress:""}},methods:{setName:function(){document.querySelector("#js-modal").style.display="block"},saveName:function(){var e=this,t=document.querySelector("#js-userName").value;""!=t.trim()&&(e.userName=t,document.querySelector("#js-modal").style.display="none")},getTime:function(){var e=new Date,t=e.getHours(),s=e.getMinutes();return(t>=12?"下午":"上午")+" "+t+":"+(s<10?"0"+s:s)},sendMessage:function(e){var t=this,s=document.querySelector("#js-userName"),o=document.querySelector("#js-message");return!e.shiftKey&&(o.value.length<=1&&""==o.value.trim()?(e.preventDefault(),!1):(a.push({userName:s.value,type:"text",message:o.value,timeStamp:t.getTime()}),o.value="",void e.preventDefault()))},sendImage:function(e){var t=this,s=document.querySelector("#js-userName"),i=e.target.files[0],r=Math.floor(Date.now()/1e3)+"_"+i.name,n={contentType:"image/*"},l=document.querySelector("#js-progressBar"),m=o.child(r).put(i,n);m.on(firebase.storage.TaskEvent.STATE_CHANGED,function(e){var s=Math.floor(e.bytesTransferred/e.totalBytes*100);s<100&&(t.upload=!0,t.progress=s+"%",l.setAttribute("style","width:"+s+"%"))},function(e){a.child("bug/").push({userName:s.value,type:"image",message:e.code,timeStamp:t.getTime()})},function(){var e=m.snapshot.downloadURL;a.push({userName:s.value,type:"image",message:e,timeStamp:t.getTime()}),t.upload=!1})}},mounted:function(){var e=this;a.on("value",function(t){var s=t.val();e.messages=s})},updated:function(){var e=document.querySelector("#js-roomBody");e.scrollTop=e.scrollHeight}}},KSPA:function(e,t){e.exports="data:image/png;base64,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"},M93x:function(e,t,s){"use strict";function a(e){s("Cl4r")}var o=s("xJD8"),i=s("U9jt"),r=s("VU/8"),n=a,l=r(o.a,i.a,n,null,null);t.a=l.exports},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("7+uW"),o=s("M93x"),i=s("YaEn");a.a.config.productionTip=!1,new a.a({el:"#app",router:i.a,template:"<App/>",components:{App:o.a}})},RFZe:function(e,t,s){"use strict";function a(e){s("b3Qj")}var o=s("Ds4J"),i=s("/bIL"),r=s("VU/8"),n=a,l=r(o.a,i.a,n,"data-v-d66600dc",null);t.a=l.exports},U9jt:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},o=[],i={render:a,staticRenderFns:o};t.a=i},YaEn:function(e,t,s){"use strict";var a=s("7+uW"),o=s("/ocq"),i=s("RFZe");a.a.use(o.a),t.a=new o.a({routes:[{path:"/",name:"ChatRoom",component:i.a}]})},b3Qj:function(e,t){},xJD8:function(e,t,s){"use strict";t.a={name:"app"}}},["NHnr"]);
//# sourceMappingURL=app.a143fba2d052c92bc24d.js.map